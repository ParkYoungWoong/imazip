!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=11)}([function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){
/*!
 * Copyright (c) 2011 ARAKI Hayato
 * https://github.com/arahaya/ImageFilters.js
 */
var r,n={};n.utils={initSampleCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=0,t.height=0,this.getSampleCanvas=function(){return t},this.getSampleContext=function(){return e},this.createImageData=e.createImageData?function(t,r){return e.createImageData(t,r)}:function(t,e){return new ImageData(t,e)}},getSampleCanvas:function(){return this.initSampleCanvas(),this.getSampleCanvas()},getSampleContext:function(){return this.initSampleCanvas(),this.getSampleContext()},createImageData:function(t,e){return this.initSampleCanvas(),this.createImageData(t,e)},clamp:function(t){return t>255?255:t<0?0:t},buildMap:function(t){for(var e,r=[],n=0;n<256;n+=1)r[n]=(e=t(n))>255?255:e<0?0:0|e;return r},applyMap:function(t,e,r){for(var n=0,i=t.length;n<i;n+=4)e[n]=r[t[n]],e[n+1]=r[t[n+1]],e[n+2]=r[t[n+2]],e[n+3]=t[n+3]},mapRGB:function(t,e,r){this.applyMap(t,e,this.buildMap(r))},getPixelIndex:function(t,e,r,n,i){if(t<0||t>=r||e<0||e>=n)switch(i){case 1:t=t<0?0:t>=r?r-1:t,e=e<0?0:e>=n?n-1:e;break;case 2:t=(t%=r)<0?t+r:t,e=(e%=n)<0?e+n:e;break;default:return null}return e*r+t<<2},getPixel:function(t,e,r,n,i,a){if(e<0||e>=n||r<0||r>=i)switch(a){case 1:e=e<0?0:e>=n?n-1:e,r=r<0?0:r>=i?i-1:r;break;case 2:e=(e%=n)<0?e+n:e,r=(r%=i)<0?r+i:r;break;default:return 0}var o=r*n+e<<2;return t[o+3]<<24|t[o]<<16|t[o+1]<<8|t[o+2]},getPixelByIndex:function(t,e){return t[e+3]<<24|t[e]<<16|t[e+1]<<8|t[e+2]},copyBilinear:function(t,e,r,n,i,a,o,u){var s,h,c,l,f,g,d,v=e<0?e-1|0:0|e,p=r<0?r-1|0:0|r,m=e-v,w=r-p,y=0,b=0,_=0,x=0;if(v>=0&&v<n-1&&p>=0&&p<i-1){if(s=p*n+v<<2,!m&&!w)return a[o]=t[s],a[o+1]=t[s+1],a[o+2]=t[s+2],void(a[o+3]=t[s+3]);y=t[s+3]<<24|t[s]<<16|t[s+1]<<8|t[s+2],b=t[(s+=4)+3]<<24|t[s]<<16|t[s+1]<<8|t[s+2],_=t[(s=s-8+(n<<2))+3]<<24|t[s]<<16|t[s+1]<<8|t[s+2],x=t[(s+=4)+3]<<24|t[s]<<16|t[s+1]<<8|t[s+2]}else{if(y=this.getPixel(t,v,p,n,i,u),!m&&!w)return a[o]=y>>16&255,a[o+1]=y>>8&255,a[o+2]=255&y,void(a[o+3]=y>>24&255);b=this.getPixel(t,v+1,p,n,i,u),_=this.getPixel(t,v,p+1,n,i,u),x=this.getPixel(t,v+1,p+1,n,i,u)}l=((y>>16&255)*(h=1-m)+(b>>16&255)*m)*(c=1-w)+((_>>16&255)*h+(x>>16&255)*m)*w,f=((y>>8&255)*h+(b>>8&255)*m)*c+((_>>8&255)*h+(x>>8&255)*m)*w,g=((255&y)*h+(255&b)*m)*c+((255&_)*h+(255&x)*m)*w,d=((y>>24&255)*h+(b>>24&255)*m)*c+((_>>24&255)*h+(x>>24&255)*m)*w,a[o]=l>255?255:l<0?0:0|l,a[o+1]=f>255?255:f<0?0:0|f,a[o+2]=g>255?255:g<0?0:0|g,a[o+3]=d>255?255:d<0?0:0|d},rgbToHsl:function(t,e,r){r/=255;var n=(t/=255)>(e/=255)?t>r?t:r:e>r?e:r,i=t<e?t<r?t:r:e<r?e:r,a=n-i,o=0,u=0,s=(i+n)/2;return 0!==a&&(o=t===n?(e-r)/a+(e<r?6:0):e===n?(r-t)/a+2:(t-e)/a+4,o/=6,u=s>.5?a/(2-n-i):a/(n+i)),[o,u,s]},hslToRgb:function(t,e,r){var n,i,a,o,u,s=[];if(0===e)s=[o=u=255*r+.5|0,o,u];else{var h;n=2*r-(i=r<=.5?r*(e+1):r+e-r*e),a=t+1/3;for(var c=0;c<3;c+=1)a<0?a+=1:a>1&&(a-=1),h=6*a<1?n+(i-n)*a*6:2*a<1?i:3*a<2?n+(i-n)*(2/3-a)*6:n,s[c]=255*h+.5|0,a-=1/3}return s}},n.Translate=function(t,e,r,n){},n.Scale=function(t,e,r,n){},n.Rotate=function(t,e,r,n,i,a){},n.Affine=function(t,e,r,n){},n.UnsharpMask=function(t,e){},n.ConvolutionFilter=function(t,e,r,n,i,a,o,u,s,h){var c=t.data,l=t.width,f=t.height,g=(c.length,this.utils.createImageData(l,f)),d=g.data;i=i||1,a=a||0,!1!==o&&(o=!0),!1!==u&&(u=!0);for(var v=0,p=e>>1,m=r>>1,w=(s=s||0)>>16&255,y=s>>8&255,b=255&s,_=255*(h=h||0),x=0;x<f;x+=1)for(var I=0;I<l;I+=1,v+=4){for(var C,D=0,S=0,T=0,M=0,j=!1,A=0,B=-p;B<=p;B+=1){var P,k=x+B;0<=k&&k<f?P=k*l:u?P=x*l:j=!0;for(var E=-m;E<=m;E+=1){var O=n[A++];if(0!==O){var F=I+E;if(0<=F&&F<l||(u?F=I:j=!0),j)D+=O*w,S+=O*y,T+=O*b,M+=O*_;else{var R=P+F<<2;D+=O*c[R],S+=O*c[R+1],T+=O*c[R+2],M+=O*c[R+3]}}}}d[v]=(C=D/i+a)>255?255:C<0?0:0|C,d[v+1]=(C=S/i+a)>255?255:C<0?0:0|C,d[v+2]=(C=T/i+a)>255?255:C<0?0:0|C,d[v+3]=o?c[v+3]:(C=M/i+a)>255?255:C<0?0:0|C}return g},n.Binarize=function(t,e){var r=t.data,n=t.width,i=t.height,a=r.length,o=this.utils.createImageData(n,i),u=o.data;isNaN(e)&&(e=.5),e*=255;for(var s=0;s<a;s+=4){var h=r[s]+r[s+1]+r[s+2]/3;u[s]=u[s+1]=u[s+2]=h<=e?0:255,u[s+3]=255}return o},n.BlendAdd=function(t,e,r,n){for(var i,a=t.data,o=t.width,u=t.height,s=a.length,h=this.utils.createImageData(o,u),c=h.data,l=e.data,f=0;f<s;f+=4)c[f]=(i=a[f]+l[f])>255?255:i,c[f+1]=(i=a[f+1]+l[f+1])>255?255:i,c[f+2]=(i=a[f+2]+l[f+2])>255?255:i,c[f+3]=255;return h},n.BlendSubtract=function(t,e,r,n){for(var i,a=t.data,o=t.width,u=t.height,s=a.length,h=this.utils.createImageData(o,u),c=h.data,l=e.data,f=0;f<s;f+=4)c[f]=(i=a[f]-l[f])<0?0:i,c[f+1]=(i=a[f+1]-l[f+1])<0?0:i,c[f+2]=(i=a[f+2]-l[f+2])<0?0:i,c[f+3]=255;return h},n.BoxBlur=(r=function(t,e,r,n,i){var a,o,u,s,h,c,l,f,g,d,v,p,m,w,y=2*i+1,b=i+1,_=r-1,x=0,I=[];for(g=0,d=256*y;g<d;g+=1)I[g]=g/y|0;for(p=0;p<n;p+=1){for(a=o=u=s=0,h=p,a+=b*t[c=x<<2],o+=b*t[c+1],u+=b*t[c+2],s+=b*t[c+3],g=1;g<=i;g+=1)a+=t[c=x+(g<r?g:_)<<2],o+=t[c+1],u+=t[c+2],s+=t[c+3];for(v=0;v<r;v+=1)e[c=h<<2]=I[a],e[c+1]=I[o],e[c+2]=I[u],e[c+3]=I[s],(m=v+b)>_&&(m=_),(w=v-i)<0&&(w=0),f=x+w<<2,a+=t[l=x+m<<2]-t[f],o+=t[l+1]-t[f+1],u+=t[l+2]-t[f+2],s+=t[l+3]-t[f+3],h+=n;x+=r}},function(t,e,n,i){for(var a=t.data,o=t.width,u=t.height,s=(a.length,this.utils.createImageData(o,u)),h=s.data,c=this.utils.createImageData(o,u).data,l=0;l<i;l+=1)r(l?h:a,c,o,u,e),r(c,h,u,o,n);return s}),n.GaussianBlur=function(t,e){var r,n,i;switch(e){case 2:r=5,n=[1,1,2,1,1,1,2,4,2,1,2,4,8,4,2,1,2,4,2,1,1,1,2,1,1],i=52;break;case 3:r=7,n=[1,1,2,2,2,1,1,1,2,2,4,2,2,1,2,2,4,8,4,2,2,2,4,8,16,8,4,2,2,2,4,8,4,2,2,1,2,2,4,2,2,1,1,1,2,2,2,1,1],i=140;break;case 4:r=15,n=[2,2,3,4,5,5,6,6,6,5,5,4,3,2,2,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,6,8,10,13,15,17,19,19,19,17,15,13,10,8,6,6,8,11,13,16,18,19,20,19,18,16,13,11,8,6,6,8,10,13,15,17,19,19,19,17,15,13,10,8,6,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,2,2,3,4,5,5,6,6,6,5,5,4,3,2,2],i=2044;break;default:r=3,n=[1,2,1,2,4,2,1,2,1],i=16}return this.ConvolutionFilter(t,r,r,n,i,0,!1)},n.StackBlur=function(){var t=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],e=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}return function(n,i){var a,o,u,s,h,c,l,f,g,d,v,p,m,w,y,b,_,x,I,C,D,S,T,M,j,A,B,P=n.data,k=n.width,E=n.height,O=(P.length,this.Clone(n)),F=O.data,R=i+i+1,z=k-1,G=E-1,L=i+1,N=L*(L+1)/2,q=new r,H=q,U=t[i],Y=e[i];for(u=1;u<R;u+=1)H=H.next=new r,u==L&&(B=H);for(H.next=q,l=c=0,o=0;o<E;o+=1){for(b=_=x=I=f=g=d=v=0,p=L*(C=F[c]),m=L*(D=F[c+1]),w=L*(S=F[c+2]),y=L*(T=F[c+3]),f+=N*C,g+=N*D,d+=N*S,v+=N*T,H=q,u=0;u<L;u+=1)H.r=C,H.g=D,H.b=S,H.a=T,H=H.next;for(u=1;u<L;u+=1)s=c+((z<u?z:u)<<2),f+=(H.r=C=F[s])*(M=L-u),g+=(H.g=D=F[s+1])*M,d+=(H.b=S=F[s+2])*M,v+=(H.a=T=F[s+3])*M,b+=C,_+=D,x+=S,I+=T,H=H.next;for(j=q,A=B,a=0;a<k;a+=1)F[c]=f*U>>Y,F[c+1]=g*U>>Y,F[c+2]=d*U>>Y,F[c+3]=v*U>>Y,f-=p,g-=m,d-=w,v-=y,p-=j.r,m-=j.g,w-=j.b,y-=j.a,s=l+((s=a+i+1)<z?s:z)<<2,f+=b+=j.r=F[s],g+=_+=j.g=F[s+1],d+=x+=j.b=F[s+2],v+=I+=j.a=F[s+3],j=j.next,p+=C=A.r,m+=D=A.g,w+=S=A.b,y+=T=A.a,b-=C,_-=D,x-=S,I-=T,A=A.next,c+=4;l+=k}for(a=0;a<k;a+=1){for(_=x=I=b=g=d=v=f=0,p=L*(C=F[c=a<<2]),m=L*(D=F[c+1]),w=L*(S=F[c+2]),y=L*(T=F[c+3]),f+=N*C,g+=N*D,d+=N*S,v+=N*T,H=q,u=0;u<L;u+=1)H.r=C,H.g=D,H.b=S,H.a=T,H=H.next;for(h=k,u=1;u<=i;u+=1)c=h+a<<2,f+=(H.r=C=F[c])*(M=L-u),g+=(H.g=D=F[c+1])*M,d+=(H.b=S=F[c+2])*M,v+=(H.a=T=F[c+3])*M,b+=C,_+=D,x+=S,I+=T,H=H.next,u<G&&(h+=k);for(c=a,j=q,A=B,o=0;o<E;o+=1)F[s=c<<2]=f*U>>Y,F[s+1]=g*U>>Y,F[s+2]=d*U>>Y,F[s+3]=v*U>>Y,f-=p,g-=m,d-=w,v-=y,p-=j.r,m-=j.g,w-=j.b,y-=j.a,s=a+((s=o+L)<G?s:G)*k<<2,f+=b+=j.r=F[s],g+=_+=j.g=F[s+1],d+=x+=j.b=F[s+2],v+=I+=j.a=F[s+3],j=j.next,p+=C=A.r,m+=D=A.g,w+=S=A.b,y+=T=A.a,b-=C,_-=D,x-=S,I-=T,A=A.next,c+=k}return O}}(),n.Brightness=function(t,e){var r=t.data,n=t.width,i=t.height,a=(r.length,this.utils.createImageData(n,i)),o=a.data;return this.utils.mapRGB(r,o,function(t){return(t+=e)>255?255:t}),a},n.BrightnessContrastGimp=function(t,e,r){var n=t.data,i=t.width,a=t.height,o=n.length,u=this.utils.createImageData(i,a),s=u.data,h=Math.PI/4;e/=100,r*=.99,r/=100,r=Math.tan((r+1)*h);for(var c=0,l=0;l<o;l+=4)c+=19595*n[l]+38470*n[l+1]+7471*n[l+2]>>16;return c/=o/4,this.utils.mapRGB(n,s,function(t){return e<0?t*=1+e:e>0&&(t+=(255-t)*e),0!==r&&(t=(t-c)*r+c),t+.5|0}),u},n.BrightnessContrastPhotoshop=function(t,e,r){var n=t.data,i=t.width,a=t.height,o=(n.length,this.utils.createImageData(i,a)),u=o.data;return e=(e+100)/100,r=(r+100)/100,this.utils.mapRGB(n,u,function(t){return(t=((t*=e)-127.5)*r+127.5)+.5|0}),o},n.Channels=function(t,e){var r;switch(e){case 2:r=[0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0];break;case 3:r=[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0];break;default:r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0]}return this.ColorMatrixFilter(t,r)},n.Clone=function(t){return this.Copy(t,this.utils.createImageData(t.width,t.height))},n.CloneBuiltin=function(t){var e,r=t.width,n=t.height,i=this.utils.getSampleCanvas(),a=this.utils.getSampleContext();return i.width=r,i.height=n,a.putImageData(t,0,0),e=a.getImageData(0,0,r,n),i.width=0,i.height=0,e},n.ColorMatrixFilter=function(t,e){var r,n,i,a,o,u,s=t.data,h=t.width,c=t.height,l=s.length,f=this.utils.createImageData(h,c),g=f.data,d=e[0],v=e[1],p=e[2],m=e[3],w=e[4],y=e[5],b=e[6],_=e[7],x=e[8],I=e[9],C=e[10],D=e[11],S=e[12],T=e[13],M=e[14],j=e[15],A=e[16],B=e[17],P=e[18],k=e[19];for(n=0;n<l;n+=4)i=s[n],a=s[n+1],o=s[n+2],u=s[n+3],g[n]=(r=i*d+a*v+o*p+u*m+w)>255?255:r<0?0:0|r,g[n+1]=(r=i*y+a*b+o*_+u*x+I)>255?255:r<0?0:0|r,g[n+2]=(r=i*C+a*D+o*S+u*T+M)>255?255:r<0?0:0|r,g[n+3]=(r=i*j+a*A+o*B+u*P+k)>255?255:r<0?0:0|r;return f},n.ColorTransformFilter=function(t,e,r,n,i,a,o,u,s){var h,c,l=t.data,f=t.width,g=t.height,d=l.length,v=this.utils.createImageData(f,g),p=v.data;for(h=0;h<d;h+=4)p[h]=(c=l[h]*e+a)>255?255:c<0?0:c,p[h+1]=(c=l[h+1]*r+o)>255?255:c<0?0:c,p[h+2]=(c=l[h+2]*n+u)>255?255:c<0?0:c,p[h+3]=(c=l[h+3]*i+s)>255?255:c<0?0:c;return v},n.Copy=function(t,e){for(var r=t.data,n=r.length,i=e.data;n--;)i[n]=r[n];return e},n.Crop=function(t,e,r,n,i){var a,o,u,s,h=t.data,c=t.width,l=t.height,f=(h.length,this.utils.createImageData(n,i)),g=f.data,d=Math.max(e,0),v=Math.max(r,0),p=Math.min(e+n,c),m=Math.min(r+i,l),w=d-e;for(a=v,dstRow=v-r;a<m;a+=1,dstRow+=1)for(o=d,dstCol=w;o<p;o+=1,dstCol+=1)u=a*c+o<<2,g[s=dstRow*n+dstCol<<2]=h[u],g[s+1]=h[u+1],g[s+2]=h[u+2],g[s+3]=h[u+3];return f},n.CropBuiltin=function(t,e,r,n,i){var a=t.width,o=t.height,u=this.utils.getSampleCanvas(),s=this.utils.getSampleContext();u.width=a,u.height=o,s.putImageData(t,0,0);var h=s.getImageData(e,r,n,i);return u.width=0,u.height=0,h},n.Desaturate=function(t){for(var e=t.data,r=t.width,n=t.height,i=e.length,a=this.utils.createImageData(r,n),o=a.data,u=0;u<i;u+=4){var s=e[u],h=e[u+1],c=e[u+2],l=((s>h?s>c?s:c:h>c?h:c)+(s<h?s<c?s:c:h<c?h:c))/2+.5|0;o[u]=o[u+1]=o[u+2]=l,o[u+3]=e[u+3]}return a},n.DisplacementMapFilter=function(t,e,r,i,a,o,u,s,h){var c=t.data,l=t.width,f=t.height,g=(c.length,n.Clone(t)),d=g.data;r||(r=0),i||(i=0),a||(a=0),o||(o=0),u||(u=0),s||(s=0),h||(h=2);var v,p,m,w,y,b,_,x=e.width,I=e.height,C=e.data,D=x+r,S=I+i;for(b=0;b<l;b+=1)for(_=0;_<f;_+=1)v=_*l+b<<2,b<r||_<i||b>=D||_>=S?p=v:(w=b+((C[(m=(_-i)*x+(b-r)<<2)+a]-128)*u>>8),y=_+((C[m+o]-128)*s>>8),null===(p=n.utils.getPixelIndex(w+.5|0,y+.5|0,l,f,h))&&(p=v)),d[v]=c[p],d[v+1]=c[p+1],d[v+2]=c[p+2],d[v+3]=c[p+3];return g},n.Dither=function(t,e){var r,n,i=t.width,a=t.height,o=this.Clone(t),u=o.data,s=[],h=(e=e<2?2:e>255?255:e)-1,c=0,l=0;for(n=0;n<e;n+=1)s[n]=255*n/h;r=this.utils.buildMap(function(t){var r=s[c];return(l+=e)>255&&(l-=255,c+=1),r});var f,g,d,v,p,m,w,y,b,_,x,I,C,D,S,T=i-1,M=a-1,j=7/16,A=3/16,B=5/16,P=1/16;for(g=0;g<a;g+=1)for(f=0;f<i;f+=1)v=u[d=g*i+f<<2],p=u[d+1],m=u[d+2],w=r[v],y=r[p],b=r[m],u[d]=w,u[d+1]=y,u[d+2]=b,_=v-w,x=p-y,I=m-b,d+=4,f<T&&(C=u[d]+j*_,D=u[d+1]+j*x,S=u[d+2]+j*I,u[d]=C>255?255:C<0?0:0|C,u[d+1]=D>255?255:D<0?0:0|D,u[d+2]=S>255?255:S<0?0:0|S),d+=i-2<<2,f>0&&g<M&&(C=u[d]+A*_,D=u[d+1]+A*x,S=u[d+2]+A*I,u[d]=C>255?255:C<0?0:0|C,u[d+1]=D>255?255:D<0?0:0|D,u[d+2]=S>255?255:S<0?0:0|S),d+=4,g<M&&(C=u[d]+B*_,D=u[d+1]+B*x,S=u[d+2]+B*I,u[d]=C>255?255:C<0?0:0|C,u[d+1]=D>255?255:D<0?0:0|D,u[d+2]=S>255?255:S<0?0:0|S),d+=4,f<T&&g<M&&(C=u[d]+P*_,D=u[d+1]+P*x,S=u[d+2]+P*I,u[d]=C>255?255:C<0?0:0|C,u[d+1]=D>255?255:D<0?0:0|D,u[d+2]=S>255?255:S<0?0:0|S);return o},n.Edge=function(t){return this.ConvolutionFilter(t,3,3,[-1,-1,-1,-1,8,-1,-1,-1,-1])},n.Emboss=function(t){return this.ConvolutionFilter(t,3,3,[-2,-1,0,-1,1,1,0,1,2])},n.Enrich=function(t){return this.ConvolutionFilter(t,3,3,[0,-2,0,-2,20,-2,0,-2,0],10,-40)},n.Flip=function(t,e){var r,n,i,a,o=t.data,u=t.width,s=t.height,h=(o.length,this.utils.createImageData(u,s)),c=h.data;for(n=0;n<s;n+=1)for(r=0;r<u;r+=1)i=n*u+r<<2,c[a=e?(s-n-1)*u+r<<2:n*u+(u-r-1)<<2]=o[i],c[a+1]=o[i+1],c[a+2]=o[i+2],c[a+3]=o[i+3];return h},n.Gamma=function(t,e){var r=t.data,n=t.width,i=t.height,a=(r.length,this.utils.createImageData(n,i)),o=a.data;return this.utils.mapRGB(r,o,function(t){return(t=255*Math.pow(t/255,1/e)+.5)>255?255:t+.5|0}),a},n.GrayScale=function(t){for(var e=t.data,r=t.width,n=t.height,i=e.length,a=this.utils.createImageData(r,n),o=a.data,u=0;u<i;u+=4){var s=19595*e[u]+38470*e[u+1]+7471*e[u+2]>>16;o[u]=o[u+1]=o[u+2]=s,o[u+3]=e[u+3]}return a},n.HSLAdjustment=function(t,e,r,n){var i=t.data,a=t.width,o=t.height,u=i.length,s=this.utils.createImageData(a,o),h=s.data;e/=360,r/=100,n/=100;var c,l,f,g,d,v,p=this.utils.rgbToHsl,m=this.utils.hslToRgb;for(v=0;v<u;v+=4){for(c=(g=p(i[v],i[v+1],i[v+2]))[0]+e;c<0;)c+=1;for(;c>1;)c-=1;(l=g[1]+g[1]*r)<0?l=0:l>1&&(l=1),f=g[2],n>0?f+=(1-f)*n:n<0&&(f+=f*n),d=m(c,l,f),h[v]=d[0],h[v+1]=d[1],h[v+2]=d[2],h[v+3]=i[v+3]}return s},n.Invert=function(t){var e=t.data,r=t.width,n=t.height,i=(e.length,this.utils.createImageData(r,n)),a=i.data;return this.utils.mapRGB(e,a,function(t){return 255-t}),i},n.Mosaic=function(t,e){var r,n,i,a,o,u,s,h,c,l,f,g,d,v,p,m=t.data,w=t.width,y=t.height,b=(m.length,this.utils.createImageData(w,y)),_=b.data,x=Math.ceil(w/e),I=Math.ceil(y/e);for(r=0;r<I;r+=1)for((u=(o=r*e)+e)>y&&(u=y),n=0;n<x;n+=1){for((a=(i=n*e)+e)>w&&(a=w),g=d=v=p=0,f=(a-i)*(u-o),h=o;h<u;h+=1)for(c=h*w,s=i;s<a;s+=1)g+=m[l=c+s<<2],d+=m[l+1],v+=m[l+2],p+=m[l+3];for(g=g/f+.5|0,d=d/f+.5|0,v=v/f+.5|0,p=p/f+.5|0,h=o;h<u;h+=1)for(c=h*w,s=i;s<a;s+=1)_[l=c+s<<2]=g,_[l+1]=d,_[l+2]=v,_[l+3]=p}return b},n.Oil=function(t,e,r){var n,i,a,o,u,s,h,c,l,f,g,d,v,p,m,w,y,b,_=t.data,x=t.width,I=t.height,C=(_.length,this.utils.createImageData(x,I)),D=C.data,S=0,T=[],M=[],j=[],A=[],B=[],P=[];for(i=0;i<I;i+=1)for(n=0;n<x;n+=1){for(a=0;a<r;a+=1)T[a]=M[a]=j[a]=A[a]=B[a]=P[a]=0;for(o=-e;o<=e;o+=1)if(!((s=i+o)<0||s>=I))for(c=s*x,u=-e;u<=e;u+=1)(h=n+u)<0||h>=x||(f=_[l=c+h<<2],p=(g=_[l+1])*r>>8,m=(d=_[l+2])*r>>8,A[v=f*r>>8]+=f,B[p]+=g,P[m]+=d,T[v]+=1,M[p]+=1,j[m]+=1);for(w=y=b=0,a=1;a<r;a+=1)T[a]>T[w]&&(w=a),M[a]>M[y]&&(y=a),j[a]>j[b]&&(b=a);D[S]=A[w]/T[w]|0,D[S+1]=B[y]/M[y]|0,D[S+2]=P[b]/j[b]|0,D[S+3]=_[S+3],S+=4}return C},n.OpacityFilter=function(t,e){for(var r=t.data,n=t.width,i=t.height,a=r.length,o=this.utils.createImageData(n,i),u=o.data,s=0;s<a;s+=4)u[s]=r[s],u[s+1]=r[s+1],u[s+2]=r[s+2],u[s+3]=e;return o},n.Posterize=function(t,e){var r,n=t.data,i=t.width,a=t.height,o=(n.length,this.utils.createImageData(i,a)),u=o.data,s=[],h=(e=e<2?2:e>255?255:e)-1,c=0,l=0;for(r=0;r<e;r+=1)s[r]=255*r/h;return this.utils.mapRGB(n,u,function(t){var r=s[c];return(l+=e)>255&&(l-=255,c+=1),r}),o},n.Rescale=function(t,e){var r=t.data,n=t.width,i=t.height,a=(r.length,this.utils.createImageData(n,i)),o=a.data;return this.utils.mapRGB(r,o,function(t){return(t*=e)>255?255:t+.5|0}),a},n.ResizeNearestNeighbor=function(t,e,r){var n,i,a,o,u=t.data,s=t.width,h=t.height,c=(u.length,this.utils.createImageData(e,r)),l=c.data,f=s/e,g=h/r,d=0;for(a=0;a<r;a+=1)for(o=(a*g|0)*s,i=0;i<e;i+=1)n=o+i*f<<2,l[d]=u[n],l[d+1]=u[n+1],l[d+2]=u[n+2],l[d+3]=u[n+3],d+=4;return c},n.Resize=function(t,e,r){var n,i,a=t.data,o=t.width,u=t.height,s=(a.length,this.utils.createImageData(e,r)),h=s.data,c=o/e,l=u/r,f=0;for(i=0;i<r;i+=1)for(n=0;n<e;n+=1)this.utils.copyBilinear(a,n*c,i*l,o,u,h,f,0),f+=4;return s},n.ResizeBuiltin=function(t,e,r){var n,i=t.width,a=t.height,o=this.utils.getSampleCanvas(),u=this.utils.getSampleContext();return o.width=Math.max(i,e),o.height=Math.max(a,r),u.save(),u.putImageData(t,0,0),u.scale(e/i,r/a),u.drawImage(o,0,0),n=u.getImageData(0,0,e,r),u.restore(),o.width=0,o.height=0,n},n.Sepia=function(t){var e,r,n,i,a,o=t.data,u=t.width,s=t.height,h=o.length,c=this.utils.createImageData(u,s),l=c.data;for(i=0;i<h;i+=4)e=o[i],r=o[i+1],n=o[i+2],l[i]=(a=.393*e+.769*r+.189*n)>255?255:a<0?0:a+.5|0,l[i+1]=(a=.349*e+.686*r+.168*n)>255?255:a<0?0:a+.5|0,l[i+2]=(a=.272*e+.534*r+.131*n)>255?255:a<0?0:a+.5|0,l[i+3]=o[i+3];return c},n.Sharpen=function(t,e){return this.ConvolutionFilter(t,3,3,[-e/16,-e/8,-e/16,-e/8,.75*e+1,-e/8,-e/16,-e/8,-e/16])},n.Solarize=function(t){var e=t.data,r=t.width,n=t.height,i=(e.length,this.utils.createImageData(r,n)),a=i.data;return this.utils.mapRGB(e,a,function(t){return t>127?2*(t-127.5):2*(127.5-t)}),i},n.Transpose=function(t){var e,r,n=t.data,i=t.width,a=t.height,o=(n.length,this.utils.createImageData(a,i)),u=o.data;for(y=0;y<a;y+=1)for(x=0;x<i;x+=1)e=y*i+x<<2,u[r=x*a+y<<2]=n[e],u[r+1]=n[e+1],u[r+2]=n[e+2],u[r+3]=n[e+3];return o},n.Twril=function(t,e,r,n,i,a,o){var u=t.data,s=t.width,h=t.height,c=(u.length,this.utils.createImageData(s,h)),l=c.data;e*=s,r*=h,i*=Math.PI/180;var f,g,d,v,p,m,w,y,b,_=n*n,x=0;for(g=0;g<h;g+=1)for(f=0;f<s;f+=1)(p=(d=f-e)*d+(v=g-r)*v)>_?(l[x]=u[x],l[x+1]=u[x+1],l[x+2]=u[x+2],l[x+3]=u[x+3]):(p=Math.sqrt(p),m=Math.atan2(v,d)+i*(n-p)/n,w=e+p*Math.cos(m),y=r+p*Math.sin(m),o?this.utils.copyBilinear(u,w,y,s,h,l,x,a):(b=(y+.5|0)*s+(w+.5|0)<<2,l[x]=u[b],l[x+1]=u[b+1],l[x+2]=u[b+2],l[x+3]=u[b+3])),x+=4;return c},t.exports=n},function(t,e,r){var n=r(6),i=r(7),a=r(8);t.exports=function(t){return n(t)||i(t)||a()}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){(function(e,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var n;n=function(){"use strict";function t(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,a=void 0,o=void 0,u=function(t,e){d[i]=t,d[i+1]=e,2===(i+=2)&&(o?o(v):b())},s="undefined"!=typeof window?window:void 0,h=s||{},c=h.MutationObserver||h.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function g(){var t=setTimeout;return function(){return t(v,1)}}var d=new Array(1e3);function v(){for(var t=0;t<i;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}i=0}var p,m,w,y,b=void 0;function _(t,e){var r=this,n=new this.constructor(C);void 0===n[I]&&G(n);var i=r._state;if(i){var a=arguments[i-1];u(function(){return R(i,n,a,r._result)})}else O(r,n,t,e);return n}function x(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(C);return B(e,t),e}l?b=function(){return e.nextTick(v)}:c?(m=0,w=new c(v),y=document.createTextNode(""),w.observe(y,{characterData:!0}),b=function(){y.data=m=++m%2}):f?((p=new MessageChannel).port1.onmessage=v,b=function(){return p.port2.postMessage(0)}):b=void 0===s?function(){try{var t=Function("return this")().require("vertx");return void 0!==(a=t.runOnLoop||t.runOnContext)?function(){a(v)}:g()}catch(t){return g()}}():g();var I=Math.random().toString(36).substring(2);function C(){}var D=void 0,S=1,T=2,M={error:null};function j(t){try{return t.then}catch(t){return M.error=t,M}}function A(e,r,n){r.constructor===e.constructor&&n===_&&r.constructor.resolve===x?function(t,e){e._state===S?k(t,e._result):e._state===T?E(t,e._result):O(e,void 0,function(e){return B(t,e)},function(e){return E(t,e)})}(e,r):n===M?(E(e,M.error),M.error=null):void 0===n?k(e,r):t(n)?function(t,e,r){u(function(t){var n=!1,i=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?B(t,r):k(t,r))},function(e){n||(n=!0,E(t,e))},t._label);!n&&i&&(n=!0,E(t,i))},t)}(e,r,n):k(e,r)}function B(t,e){var r,n;t===e?E(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?k(t,e):A(t,e,j(e)))}function P(t){t._onerror&&t._onerror(t._result),F(t)}function k(t,e){t._state===D&&(t._result=e,t._state=S,0!==t._subscribers.length&&u(F,t))}function E(t,e){t._state===D&&(t._state=T,t._result=e,u(P,t))}function O(t,e,r,n){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+S]=r,i[a+T]=n,0===a&&t._state&&u(F,t)}function F(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,a=t._result,o=0;o<e.length;o+=3)n=e[o],i=e[o+r],n?R(r,n,i,a):i(a);t._subscribers.length=0}}function R(e,r,n,i){var a=t(n),o=void 0,u=void 0,s=void 0,h=void 0;if(a){if((o=function(t,e){try{return t(e)}catch(t){return M.error=t,M}}(n,i))===M?(h=!0,u=o.error,o.error=null):s=!0,r===o)return void E(r,new TypeError("A promises callback cannot return that same promise."))}else o=i,s=!0;r._state!==D||(a&&s?B(r,o):h?E(r,u):e===S?k(r,o):e===T&&E(r,o))}var z=0;function G(t){t[I]=z++,t._state=void 0,t._result=void 0,t._subscribers=[]}var L=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(C),this.promise[I]||G(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&k(this.promise,this._result))):E(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===D&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===x){var i=j(t);if(i===_&&t._state!==D)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===N){var a=new r(C);A(a,t,i),this._willSettleAt(a,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===D&&(this._remaining--,t===T?E(n,r):this._result[e]=r),0===this._remaining&&k(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;O(t,void 0,function(t){return r._settledAt(S,e,t)},function(t){return r._settledAt(T,e,t)})},t}(),N=function(){function e(t){this[I]=z++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){B(t,e)},function(e){E(t,e)})}catch(e){E(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return N.prototype.then=_,N.all=function(t){return new L(this,t).promise},N.race=function(t){var e=this;return n(t)?new e(function(r,n){for(var i=t.length,a=0;a<i;a++)e.resolve(t[a]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},N.resolve=x,N.reject=function(t){var e=new this(C);return E(e,t),e},N._setScheduler=function(t){o=t},N._setAsap=function(t){u=t},N._asap=u,N.polyfill=function(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=N},N.Promise=N,N},t.exports=n()}).call(this,r(9),r(10))},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){var r,n,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,h=[],c=!1,l=-1;function f(){c&&s&&(c=!1,s.length?h=s.concat(h):l=-1,h.length&&g())}function g(){if(!c){var t=u(f);c=!0;for(var e=h.length;e;){for(s=h,h=[];++l<e;)s&&s[l].run();l=-1,e=h.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new d(t,e)),1!==h.length||c||u(g)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";r.r(e);var n=r(2),i=r.n(n),a=r(3),o=r.n(a),u=r(4),s=r.n(u),h=r(0),c=r.n(h);var l={sizeFilter:function(t,e,r,n){var i,a;return t&&!e?(i=t,a=t*n/r):!t&&e?(i=e*r/n,a=e):t&&e?(i=t,a=e):(i=r,a=n),{width:i,height:a}},resizeImage:function(t,e,r){var n,i={size:t>e?t:e,name:t>e?"width":"height"},a={size:t>e?e:t,name:t>e?"height":"width"};return i.size<r?{width:t,height:e}:(n={},c()(n,i.name,r),c()(n,a.name,r*a.size/i.size),n)},checkMimeType:function(t){for(var e=[{alias:"png",value:"image/png"},{alias:"jpg",value:"image/jpeg"},{alias:"webp",value:"image/webp"}],r=0;r<e.length;r++)return e[r].alias===t||e[r].value===t?e[r].value:"image/jpeg"}},f=r(1),g=r.n(f),d=r(5),v=r.n(d),p={width:null,height:null,src:"",quality:.8,format:"image/png",maxSize:1920,thumbnail:null,filter:null},m=Object.assign({},p,{maxSize:200});v.a.polyfill();var w=function(){function t(e){o()(this,t),this.opts=Object.assign({},p,e),this.optsForThumb=Object.assign({},m,e.thumbnail),this.img=document.createElement("img"),this.img.src=e.src,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.resolve=null,this.reject=null}return s()(t,[{key:"_imageListeners",value:function(){var t=this;this.img.addEventListener("load",function(e){t._operator(e)}),this.img.addEventListener("error",function(e){t._operator(e,!0)})}},{key:"_ctxFilters",value:function(){var t=this.opts.filter.name,e=this.opts.filter.options?this.opts.filter.options:[],r=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),n=g.a[t].apply(g.a,[r].concat(i()(e)));this.ctx.putImageData(n,0,0)}},{key:"_compressor",value:function(t){var e=t.width,r=t.height,n=t.quality,i=t.maxSize,a=l.sizeFilter(e,r,this.img.naturalWidth,this.img.naturalHeight),o=l.resizeImage(a.width,a.height,i);return this.canvas.width=o.width,this.canvas.height=o.height,this.ctx.drawImage(this.img,0,0,o.width,o.height),this.opts.filter&&this._ctxFilters(),this.canvas.toDataURL(l.checkMimeType(this.opts.format),n)}},{key:"_operator",value:function(t,e){e&&this.reject(t);var r=this._compressor(this.opts),n=this.opts.thumbnail?this._compressor(this.optsForThumb):null;this.resolve({origin:r,thumbnail:n})}},{key:"run",value:function(){var t=this;return new Promise(function(e,r){t.resolve=e,t.reject=r,t._imageListeners()})}}]),t}();e.default=function(t){return new w(t).run()}}]).default});